<html>
  <head>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <script type="module">
      import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js";
      Chatbot.init({
        chatflowid: "6ef60869-af77-4650-a7f3-5280599a10af",
        apiHost: "https://flowise-flowise.apps.ky4n7bsb.eastus.aroapp.io",
      });
    </script>

    <h1>Upload your PDF</h1>

    <input type="file" id="pdfFileInput" accept=".pdf" />
    <button onclick="sendPostRequest()">UPLOAD</button>

    <script>
      function sendPostRequest() {
        const url =
          "https://flowise-flowise.apps.ky4n7bsb.eastus.aroapp.io/api/v1/prediction/6ef60869-af77-4650-a7f3-5280599a10af"; // Replace with your API endpoint
        const fileInput = document.getElementById("pdfFileInput");
        const file = fileInput.files[0];

        if (!file) {
          console.error("No file selected.");
          return;
        }

        let formData = new FormData();
        formData.append("files", file);

        async function query(formData) {
          const response = await fetch(
            "https://flowise-flowise.apps.ky4n7bsb.eastus.aroapp.io/api/v1/prediction/6ef60869-af77-4650-a7f3-5280599a10af",
            {
              method: "POST",
              body: formData,
            }
          );
          const result = await response.json();
          return result;
        }

        query(formData).then((response) => {
          console.log(response);
        });
      }
    </script>
  </body>
</html>
